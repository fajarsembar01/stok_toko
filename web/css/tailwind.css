@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
  }

  .dark {
    color-scheme: dark;
  }

  body {
    @apply font-sans text-slate-900;
    background: radial-gradient(circle at top, rgba(255, 237, 213, 0.6), transparent 55%),
      radial-gradient(circle at 20% 20%, rgba(253, 186, 116, 0.25), transparent 45%),
      linear-gradient(180deg, #fff7ed 0%, #f8fafc 38%, #f1f5f9 100%);
  }

  .dark body {
    @apply text-slate-100;
    background: radial-gradient(circle at top, rgba(30, 41, 59, 0.7), transparent 60%),
      radial-gradient(circle at 20% 20%, rgba(249, 115, 22, 0.15), transparent 50%),
      linear-gradient(180deg, #0f172a 0%, #020617 100%);
  }

  h1 {
    @apply font-display text-3xl font-semibold text-slate-900 md:text-4xl;
  }

  h2 {
    @apply font-display text-2xl font-semibold text-slate-900;
  }

  h3 {
    @apply font-display text-lg font-semibold text-slate-900;
  }

  p {
    @apply text-sm text-slate-600;
  }

  .dark h1,
  .dark h2,
  .dark h3 {
    @apply text-white;
  }

  .dark p {
    @apply text-slate-300;
  }
}

@layer components {
  .app-shell {
    @apply min-h-screen;
  }

  .app-bg {
    @apply pointer-events-none fixed inset-0 -z-10 opacity-60;
    background-image: radial-gradient(rgba(255, 255, 255, 0.8) 1px, transparent 0);
    background-size: 32px 32px;
  }

  .dark .app-bg {
    background-image: radial-gradient(rgba(148, 163, 184, 0.2) 1px, transparent 0);
  }

  .app-layout {
    @apply relative min-h-screen lg:flex;
  }

  .app-sidebar {
    @apply sticky top-0 hidden h-screen w-72 flex-col gap-8 overflow-y-auto border-r border-slate-200 bg-white/95 px-6 py-8 shadow-card backdrop-blur dark:border-slate-800 dark:bg-slate-950/80;
  }

  .app-layout.nav-open .app-sidebar {
    @apply lg:flex;
  }

  .sidebar-brand {
    @apply flex items-center gap-4 rounded-3xl border border-slate-200 bg-slate-50 px-4 py-4 text-slate-900 shadow-card dark:border-slate-800 dark:bg-slate-900;
  }

  .sidebar-meta {
    @apply text-xs uppercase tracking-wide text-slate-400;
  }

  .logo {
    @apply flex h-11 w-11 items-center justify-center rounded-2xl bg-brand-500 text-sm font-semibold text-white shadow-glow;
  }

  .eyebrow {
    @apply text-xs font-semibold uppercase tracking-wide text-slate-400;
  }

  .nav-links {
    @apply flex flex-col gap-2;
  }

  .nav-link {
    @apply flex items-center justify-between rounded-2xl px-4 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-100 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white;
  }

  .nav-link.active {
    @apply bg-slate-900 text-white shadow-glow dark:bg-white dark:text-slate-900;
  }

  .nav-link span {
    @apply text-xs text-slate-400;
  }

  .topbar {
    @apply sticky top-0 z-30 border-b border-slate-200 bg-white/85 px-5 py-4 backdrop-blur dark:border-slate-800 dark:bg-slate-950/80;
  }

  .topbar-inner {
    @apply flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between;
  }

  .topbar-title {
    @apply text-lg font-semibold text-slate-900 dark:text-white;
  }

  .topbar-actions {
    @apply flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center sm:justify-end;
  }

  .control-group {
    @apply flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center;
  }

  .filter-bar {
    @apply flex flex-nowrap items-center gap-2;
  }

  .input-compact {
    @apply h-10 px-3 text-sm;
  }

  .select-compact-tight {
    @apply h-10 px-3 text-sm w-28;
  }

  .select-compact {
    @apply w-full sm:w-auto sm:min-w-[180px];
  }

  .account {
    @apply relative w-full sm:w-auto;
  }

  .account-toggle {
    @apply inline-flex w-full items-center gap-3 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-left text-sm font-semibold text-slate-700 shadow-sm transition hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800 sm:w-auto;
  }

  .account-avatar {
    @apply flex h-9 w-9 items-center justify-center rounded-xl bg-brand-500 text-sm font-semibold text-white shadow-glow;
  }

  .account-meta {
    @apply flex flex-col leading-tight;
  }

  .account-name {
    @apply text-sm font-semibold text-slate-900 dark:text-white;
  }

  .account-role {
    @apply text-[11px] font-semibold uppercase tracking-wide text-slate-400;
  }

  .account-caret {
    @apply text-xs text-slate-400;
  }

  .account-menu {
    @apply absolute right-0 z-40 mt-3 min-w-[180px] rounded-2xl border border-slate-200 bg-white p-2 shadow-card dark:border-slate-700 dark:bg-slate-900;
  }

  .account-link {
    @apply flex w-full items-center justify-between rounded-xl px-3 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800;
  }

  .mobile-toggle {
    @apply inline-flex h-10 w-11 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-700 shadow-sm transition hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800;
  }

  .mobile-drawer {
    @apply fixed inset-y-0 left-0 z-40 w-72 -translate-x-full bg-white px-6 py-8 shadow-2xl transition-transform dark:bg-slate-950 lg:hidden relative;
  }

  .mobile-drawer.open {
    @apply translate-x-0;
  }

  .mobile-backdrop {
    @apply fixed inset-0 z-30 hidden bg-slate-900/40 backdrop-blur;
  }

  .hamburger {
    @apply flex flex-col items-center justify-center gap-1;
  }

  .hamburger-line {
    @apply block h-0.5 w-5 rounded-full bg-current;
  }

  .drawer-close {
    @apply absolute right-4 top-4 inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate-200 bg-white text-lg font-semibold text-slate-600 shadow-sm transition hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800;
  }

  .page {
    @apply relative space-y-8 px-5 py-8 sm:px-8;
  }

  .page-header {
    @apply flex flex-wrap items-center justify-between gap-6 rounded-3xl border border-slate-200 bg-white/90 px-6 py-6 shadow-card dark:border-slate-800 dark:bg-slate-900/80;
  }

  .page-actions {
    @apply flex flex-wrap items-center gap-3;
  }

  .badge {
    @apply inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs font-semibold text-slate-700 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200;
  }

  .badge-accent {
    @apply border-brand-200 bg-brand-50 text-brand-700;
  }

  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold transition;
  }

  .btn-primary {
    @apply btn bg-brand-500 text-white shadow-glow hover:bg-brand-600;
  }

  .btn-ghost {
    @apply btn border border-slate-200 bg-white text-slate-700 hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800;
  }

  .btn-danger {
    @apply btn bg-rose-500 text-white hover:bg-rose-600;
  }

  .primary {
    @apply btn-primary;
  }

  .ghost {
    @apply btn-ghost;
  }

  .danger {
    @apply btn-danger;
  }

  .input,
  .select,
  .textarea {
    @apply w-full rounded-xl border-slate-200 bg-white text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-brand-500 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100;
  }

  .form-grid {
    @apply grid gap-4 md:grid-cols-2;
  }

  .form-stack {
    @apply flex flex-col gap-4;
  }

  .span-2 {
    @apply md:col-span-2;
  }

  .card {
    @apply rounded-3xl border border-slate-200 bg-white/90 shadow-card backdrop-blur dark:border-slate-800 dark:bg-slate-900/80;
  }

  .card-head {
    @apply flex flex-wrap items-center justify-between gap-4 border-b border-slate-100 px-6 py-5 dark:border-slate-800;
  }

  .card-body {
    @apply px-6 py-6;
  }

  .kpi-grid {
    @apply grid gap-4 md:grid-cols-2 xl:grid-cols-4;
  }

  .kpi-card {
    @apply rounded-2xl border border-slate-200 bg-white px-5 py-4 shadow-card dark:border-slate-800 dark:bg-slate-900;
  }

  .table-wrap {
    @apply overflow-x-auto rounded-2xl border border-slate-200 dark:border-slate-800;
  }

  .table-wrap-compact {
    @apply overflow-x-hidden;
  }

  .products-grid,
  .transactions-grid {
    @apply grid gap-6 lg:grid-cols-[360px,1fr];
  }

  .products-grid.form-hidden,
  .transactions-grid.form-hidden {
    @apply lg:grid-cols-1;
  }

  .fab-toggle {
    @apply fixed bottom-6 right-6 z-40 inline-flex h-12 w-12 items-center justify-center rounded-full bg-brand-500 text-white shadow-glow transition hover:bg-brand-600;
  }

  .fab-icon {
    @apply text-xl font-semibold leading-none;
  }

  .table {
    @apply w-full text-left text-sm;
  }

  .table.table-compact {
    @apply table-fixed w-full;
  }

  .table.table-compact th,
  .table.table-compact td {
    @apply whitespace-normal break-words;
  }

  .table.table-compact th {
    @apply px-3 py-2 text-[11px];
  }

  .table.table-compact td {
    @apply px-3 py-2;
  }

  .table th {
    @apply whitespace-nowrap border-b border-slate-200 bg-slate-50 px-4 py-3 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-400;
  }

  .table td {
    @apply border-b border-slate-100 px-4 py-3 text-slate-700 dark:border-slate-800 dark:text-slate-200;
  }

  .table tbody tr:hover {
    @apply bg-slate-50 dark:bg-slate-800/40;
  }

  .status-pill {
    @apply inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-600 dark:border-slate-700 dark:text-slate-200;
  }

  .status-active {
    @apply border-emerald-200 bg-emerald-50 text-emerald-700;
  }

  .status-inactive {
    @apply border-slate-200 bg-slate-100 text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300;
  }

  .status-cash {
    @apply border-sky-200 bg-sky-50 text-sky-700;
  }

  .status-credit {
    @apply border-amber-200 bg-amber-50 text-amber-700;
  }

  .status-in {
    @apply border-emerald-200 bg-emerald-50 text-emerald-700;
  }

  .status-out {
    @apply border-sky-200 bg-sky-50 text-sky-700;
  }

  .status-damage {
    @apply border-rose-200 bg-rose-50 text-rose-700;
  }

  .drawer {
    @apply fixed right-0 top-0 z-40 flex h-full w-full max-w-lg translate-x-full flex-col border-l border-slate-200 bg-white shadow-2xl transition-transform dark:border-slate-800 dark:bg-slate-900;
  }

  .drawer.open {
    @apply translate-x-0;
  }

  .drawer-backdrop {
    @apply fixed inset-0 z-30 bg-slate-900/40 backdrop-blur;
  }

  .drawer-form {
    @apply flex-1 min-h-0 overflow-y-auto;
  }

  .modal {
    @apply fixed inset-0 z-50 flex items-center justify-center px-4 py-6;
  }

  .modal-backdrop {
    @apply absolute inset-0 bg-slate-900/40 backdrop-blur;
  }

  .modal-card {
    @apply relative w-full max-w-lg max-h-[90vh] overflow-y-auto;
  }

  .drawer-header {
    @apply flex items-center justify-between border-b border-slate-200 px-6 py-4 dark:border-slate-800;
  }

  .drawer-summary {
    @apply grid grid-cols-2 gap-4 border-b border-slate-100 px-6 py-4 text-sm text-slate-600 dark:border-slate-800 dark:text-slate-300;
  }

  .drawer-actions {
    @apply sticky bottom-0 flex flex-wrap gap-3 border-t border-slate-200 bg-white/95 pb-2 pt-4 backdrop-blur dark:border-slate-800 dark:bg-slate-900/95;
  }

  .toast {
    @apply fixed bottom-6 left-6 z-50 rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white opacity-0 shadow-lg transition;
  }

  .toast.show {
    @apply translate-y-0 opacity-100;
  }

  .toast.error {
    @apply bg-rose-500;
  }

  .cell-title {
    @apply font-semibold text-slate-900 dark:text-white;
  }

  .cell-meta {
    @apply text-xs text-slate-500 dark:text-slate-400;
  }

  .thumb {
    @apply flex h-10 w-10 items-center justify-center overflow-hidden rounded-xl border border-slate-200 bg-slate-100 text-[10px] font-semibold text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300;
  }

  .img-col {
    @apply w-14 text-center;
  }

  .thumb-img {
    @apply h-full w-full object-cover;
  }

  .image-preview {
    @apply h-16 w-16 rounded-xl border border-slate-200 object-cover dark:border-slate-700;
  }

  .image-adjust {
    @apply mt-2 flex flex-wrap items-start gap-3;
  }

  .image-canvas {
    @apply h-24 w-24 rounded-xl border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800;
  }

  .image-controls {
    @apply flex flex-wrap items-end gap-2 text-xs;
  }

  .image-control {
    @apply flex min-w-[72px] flex-col gap-1;
  }

  .image-reset {
    @apply h-8 px-2 text-xs;
  }

  .history-item {
    @apply rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-300;
  }

  .info-grid {
    @apply grid grid-cols-2 gap-4 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-300;
  }

  .summary-box {
    @apply rounded-2xl border border-slate-200 bg-white p-5 shadow-card dark:border-slate-800 dark:bg-slate-900;
  }

  .summary-row {
    @apply flex items-center justify-between border-t border-slate-100 py-2 text-sm text-slate-600 dark:border-slate-800 dark:text-slate-300;
  }

  .summary-row.total {
    @apply text-base font-semibold text-slate-900 dark:text-white;
  }

  .summary-items {
    @apply space-y-2 text-sm;
  }

  .summary-item {
    @apply flex items-center justify-between text-slate-700 dark:text-slate-200;
  }

  .summary-note {
    @apply mt-3 text-xs text-slate-500 dark:text-slate-400;
  }

  .receipt-grid {
    @apply grid gap-6 xl:grid-cols-[1.1fr,0.9fr];
  }

  .receipt-sheet {
    @apply rounded-2xl border border-slate-200 bg-white p-5 text-sm text-slate-700 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100;
  }

  .receipt-header {
    @apply space-y-1 text-center;
  }

  .receipt-title {
    @apply text-base font-semibold text-slate-900 dark:text-white;
  }

  .receipt-meta {
    @apply text-xs text-slate-500 dark:text-slate-400;
  }

  .receipt-divider {
    @apply my-3 border-t border-dashed border-slate-200 dark:border-slate-700;
  }

  .receipt-items {
    @apply space-y-3;
  }

  .receipt-item {
    @apply flex items-start justify-between gap-3;
  }

  .receipt-item-name {
    @apply font-semibold text-slate-900 dark:text-white;
  }

  .receipt-item-meta {
    @apply text-xs text-slate-500 dark:text-slate-400;
  }

  .receipt-item-total {
    @apply font-semibold;
  }

  .receipt-total {
    @apply text-base;
  }

  .receipt-footer {
    @apply mt-4 text-center text-xs text-slate-500 dark:text-slate-400;
  }

  .receipt-empty {
    @apply text-xs text-slate-500 dark:text-slate-400;
  }

  .payment-helper {
    @apply rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-300;
  }

  .payment-helper-title {
    @apply text-xs font-semibold uppercase tracking-wide text-slate-400;
  }

  .payment-helper-text {
    @apply mt-2 text-sm text-slate-700 dark:text-slate-200;
  }

  .payment-helper-cash {
    @apply mt-3 flex flex-wrap items-end justify-between gap-3;
  }

  .product-grid {
    @apply grid gap-4 md:grid-cols-2 xl:grid-cols-3;
  }

  .product-card {
    @apply flex flex-col justify-between gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-card dark:border-slate-800 dark:bg-slate-900;
  }

  .product-meta {
    @apply text-xs text-slate-500 dark:text-slate-400;
  }

  .qty-control {
    @apply flex items-center gap-2;
  }

  .qty-control input {
    @apply w-16 rounded-lg border border-slate-200 bg-white text-center text-sm text-slate-900 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100;
  }

  .store-card {
    @apply min-h-[180px];
  }
}

@media print {
  body {
    background: #ffffff !important;
  }

  .app-bg {
    display: none !important;
  }

  .print-hidden {
    display: none !important;
  }

  body * {
    visibility: hidden;
  }

  .print-area,
  .print-area * {
    visibility: visible;
  }

  .print-area {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
  }

  .receipt-sheet {
    border: none !important;
    box-shadow: none !important;
  }
}
